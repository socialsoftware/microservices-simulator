package {{packageName}};

import static {{basePackage}}.ms.TransactionalModel.{{transactionModel}};
import static {{basePackage}}.{{projectName}}.microservices.exception.{{ProjectName}}ErrorMessage.*;

{{#each imports}}
{{this}}
{{/each}}

{{annotations.service}}
public class {{aggregateName}}Functionalities {
{{#each dependencies}}
{{annotations.autowired}}{{#unless required}}(required = false){{/unless}}
private {{type}} {{name}};
{{/each}}

{{annotations.autowired}}
private Environment env;

private TransactionalModel workflowType;

@PostConstruct
public void init() {
String[] activeProfiles = env.getActiveProfiles();
if (Arrays.asList(activeProfiles).contains({{transactionModel}}.getValue())) {
workflowType = {{transactionModel}};
} else {
throw new {{ProjectName}}Exception(UNDEFINED_TRANSACTIONAL_MODEL);
}
}

{{businessMethods}}
}