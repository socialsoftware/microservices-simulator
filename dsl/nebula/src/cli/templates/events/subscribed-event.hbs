package {{packageName}};

import pt.ulisboa.tecnico.socialsoftware.ms.domain.event.Event;
import pt.ulisboa.tecnico.socialsoftware.ms.domain.event.EventSubscription;
import {{sourceAggregatePackage}}.{{sourceAggregate}};
import {{eventTypePackage}}.{{eventTypeName}};

public class {{subscriptionName}} extends EventSubscription {
    private final {{sourceAggregate}} {{sourceAggregateVariable}};

    public {{subscriptionName}}({{sourceAggregate}} {{sourceAggregateVariable}}) {
        super({{subscriptionKeyAggregateIdExpr}},
                {{subscriptionKeyVersionExpr}},
                {{eventTypeName}}.class.getSimpleName());
        this.{{sourceAggregateVariable}} = {{sourceAggregateVariable}};
    }

    public boolean subscribesEvent(Event event) {
        {{#if conditions}}
        return super.subscribesEvent(event){{#each conditions}} && {{condition}}{{/each}};
        {{else}}
        return super.subscribesEvent(event);
        {{/if}}
    }
}
